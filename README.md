# ๐ฏ Mada_R - ูุธุงู ุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุตุฑู ุงููุชูุฏู

ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุตุฑู ุงููุงูู ูุดุฑูุฉ ูุฏู ุงูุณูุงุญูุฉุ ูููุฑ ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู ูุน ูุธุงู ูุตุงุฏูุฉ ุขููุ ุชุชุจุน ูุงูู ููุนูููุงุชุ ูุฅููุงููุงุช ุชูุงุฑูุฑ ูุชูุฏูุฉ.

## โจ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ูุธุงู ุงููุตุงุฏูุฉ ูุงูุฃูุงู
- ุชุณุฌูู ุฏุฎูู ุขูู ุจุงุณุชุฎุฏุงู JWT Tokens
- ูุธุงู ุชุณุฌูู ุญุณุงุจุงุช ุฌุฏูุฏุฉ (ูููุณุคูููู ููุท)
- ุตูุงุญูุงุช ูุชุนุฏุฏุฉ ุงููุณุชููุงุช (Admin, Manager, Accountant, User)
- ุชุชุจุน ูุงูู ูุฌููุน ุงูุนูููุงุช ูุงูุชุนุฏููุงุช (Audit Log)
- ุญูุงูุฉ ูู SQL Injection ู XSS
- Rate Limiting ูููุน ุงููุฌูุงุช

### ๐ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- ุฅูุดุงุก ุทูุจุงุช ุตุฑู ุฌุฏูุฏุฉ ูุน ุจููุฏ ูุชุนุฏุฏุฉ
- ุชุญููู ุชููุงุฆู ูููุจุงูุบ ูู ุฃุฑูุงู ุฅูู ูุชุงุจุฉ ุนุฑุจูุฉ
- ุชูููุฏ ุชููุงุฆู ูุฃุฑูุงู ุงูุทูุจุงุช ุงููุชุณูุณูุฉ (MADA-YYYY-XXXX)
- ุญุงูุงุช ูุชุนุฏุฏุฉ ููุทูุจุงุช (ุชู ุงูุชุนููุฏุ ูู ุงูุชุธุงุฑุ ููุงููุ ุชู ุงูุชูููุฐ)
- ุฅุถุงูุฉ ุชูููุนุงุช ุฑูููุฉ
- ุจุญุซ ูููุชุฑุฉ ูุชูุฏูุฉ

### ๐ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช
- ููุฎุต ุฅุญุตุงุฆู ููุดูุฑ ุงูุญุงูู
- ุฅุญุตุงุฆูุงุช ุดูุฑูุฉ ููุตูุฉ
- ุชูุฒูุน ุงูุทูุจุงุช ุญุณุจ ุงูุฃูุณุงู
- ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ (Bar Charts, Pie Charts)
- ุชุตุฏูุฑ ุงูุจูุงูุงุช (Excel, PDF, CSV)
- ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ ูู ุฌููุน ุงูุชูุงุฑูุฑ

### ๐ง ูุธุงู ุงูุฅุดุนุงุฑุงุช ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุฅุดุนุงุฑุงุช ุนูุฏ ุงูููุงููุฉ ุนูู ุงูุทูุจุงุช
- ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุชูููุฐ
- ุชูุจููุงุช ููุทูุจุงุช ุงููุชุฃุฎุฑุฉ
- ุฅุฑุณุงู ุชููุงุฆู ููุจุฑูุฏ ุงูุฅููุชุฑููู

### ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู
- ุชุตููู ุนุตุฑู ูุณูู ุงูุงุณุชุฎุฏุงู
- ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ (RTL)
- Responsive Design (Desktop, Tablet, Mobile)
- Dark Mode support
- ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ
- Toast Notifications

## ๐ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ
- Node.js (v18 ุฃู ุฃุญุฏุซ)
- MySQL (v8.0 ุฃู ุฃุญุฏุซ)
- npm ุฃู pnpm

### ุฎุทูุงุช ุงูุชุซุจูุช

1. **ุงุณุชูุณุงุฎ ุงููุดุฑูุน**
```bash
git clone https://github.com/waleedqari2/Mada_R.git
cd Mada_R
```

2. **ุชุซุจูุช ุงูุญุฒู**
```bash
npm install --legacy-peer-deps
```

3. **ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช**
```bash
# ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
mysql -u root -p < server/database/schema.sql
```

4. **ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**
```bash
# ูุณุฎ ููู ุงููุซุงู
cp .env.example .env

# ุชุญุฏูุซ ุงูููู ูู ููู .env
nano .env
```

**ูุญุชููุงุช ููู .env:**
```env
# Server Configuration
PORT=3000
NODE_ENV=development

# Database Configuration
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password_here
DB_NAME=mada_requests

# JWT Configuration
JWT_SECRET=your_jwt_secret_key_here_change_in_production
JWT_EXPIRES_IN=7d

# Email Configuration
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_password_here
EMAIL_FROM=ูุธุงู ุทูุจุงุช ุงูุตุฑู <your_email@gmail.com>

# CORS Configuration
CORS_ORIGIN=http://localhost:3000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

5. **ุชุดุบูู ุงูุชุทุจูู ูู ูุถุน ุงูุชุทููุฑ**
```bash
npm run dev
```

ุงูุชุทุจูู ุณูุนูู ุนูู `http://localhost:3000`

## ๐ณ ุงูุชุดุบูู ุจุงุณุชุฎุฏุงู Docker

### ุงุณุชุฎุฏุงู Docker Compose

1. **ุชุญุฏูุซ ููู .env**
```bash
cp .env.example .env
# ูู ุจุชุญุฏูุซ ุงูููู ุญุณุจ ุงูุญุงุฌุฉ
```

2. **ุจูุงุก ูุชุดุบูู ุงูุญุงููุงุช**
```bash
docker-compose up -d
```

3. **ุงููุตูู ููุชุทุจูู**
- ุงูุชุทุจูู: `http://localhost:3000`
- MySQL: `localhost:3306`

4. **ุฅููุงู ุงูุญุงููุงุช**
```bash
docker-compose down
```

## ๐ ุงููุดุฑ ุนูู Railway

### ุงูุฎุทูุงุช

1. **ุฅูุดุงุก ุญุณุงุจ ุนูู Railway**
   - ุงูุชูู ุฅูู [railway.app](https://railway.app)
   - ุณุฌู ุฏุฎูู ุจุงุณุชุฎุฏุงู GitHub

2. **ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ**
   - ุงุฎุชุฑ "Deploy from GitHub repo"
   - ุงุฎุชุฑ ูุณุชูุฏุน Mada_R

3. **ุฅุถุงูุฉ ูุงุนุฏุฉ ุจูุงูุงุช MySQL**
   - ุงุถุบุท ุนูู "+ New"
   - ุงุฎุชุฑ "Database" โ "MySQL"
   - ุงูุชุธุฑ ุญุชู ูุชู ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

4. **ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ**
   - ุงูุชูู ุฅูู "Variables"
   - ุฃุถู ุฌููุน ุงููุชุบูุฑุงุช ูู .env.example
   - ุงุณุชุฎุฏู ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู MySQL plugin

5. **ุชุดุบูู Schema**
```bash
# ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
mysql -h [MYSQL_HOST] -u [MYSQL_USER] -p[MYSQL_PASSWORD] [MYSQL_DATABASE] < server/database/schema.sql
```

6. **Deploy**
   - Railway ุณูููู ุจุงูุจูุงุก ูุงููุดุฑ ุชููุงุฆูุงู
   - ุณุชุญุตู ุนูู ุฑุงุจุท ููุชุทุจูู

## ๐ API Documentation

### Authentication Endpoints

#### POST /api/auth/login
ุชุณุฌูู ุงูุฏุฎูู
```json
{
  "username": "admin",
  "password": "admin123"
}
```

#### POST /api/auth/register (Admin only)
ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
```json
{
  "username": "user123",
  "password": "password123",
  "email": "user@example.com",
  "role": "user"
}
```

#### GET /api/auth/profile
ุงูุญุตูู ุนูู ุงูููู ุงูุดุฎุตู
```
Headers: Authorization: Bearer [token]
```

### Requests Endpoints

#### POST /api/requests
ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
```json
{
  "paymentType": "ูุตุฑููุงุช ุชุดุบูููุฉ",
  "requesterName": "ุฃุญูุฏ ูุญูุฏ",
  "department": "ูุณู ุงููุจูุนุงุช",
  "amountInNumbers": 1500,
  "notes": "ููุงุญุธุงุช ุฅุถุงููุฉ",
  "items": [
    {
      "description": "ุจูุฏ ุฃูู",
      "unit": "ูุตุฑููุงุช",
      "quantity": 1,
      "unitPrice": 1500,
      "total": 1500
    }
  ]
}
```

#### GET /api/requests
ุงูุญุตูู ุนูู ุฌููุน ุงูุทูุจุงุช
```
Query Parameters:
  - page: ุฑูู ุงูุตูุญุฉ (ุงูุชุฑุงุถู: 1)
  - limit: ุนุฏุฏ ุงููุชุงุฆุฌ ูู ุงูุตูุญุฉ (ุงูุชุฑุงุถู: 10)
```

#### GET /api/requests/:id
ุงูุญุตูู ุนูู ุทูุจ ูุญุฏุฏ

#### PUT /api/requests/:id
ุชุญุฏูุซ ุทูุจ

#### DELETE /api/requests/:id
ุญุฐู ุทูุจ

#### PUT /api/requests/:id/status
ุชุบููุฑ ุญุงูุฉ ุงูุทูุจ
```json
{
  "status": "ููุงูู"
}
```

#### GET /api/requests/search
ุงูุจุญุซ ูู ุงูุทูุจุงุช
```
Query Parameters:
  - query: ูุต ุงูุจุญุซ
```

#### GET /api/requests/filter
ููุชุฑุฉ ุงูุทูุจุงุช
```
Query Parameters:
  - status: ุงูุญุงูุฉ
  - department: ุงููุณู
  - startDate: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
  - endDate: ุชุงุฑูุฎ ุงูููุงูุฉ
```

### Reports Endpoints

#### GET /api/reports/summary
ููุฎุต ุฅุญุตุงุฆู ููุดูุฑ ุงูุญุงูู

#### GET /api/reports/monthly
ุฅุญุตุงุฆูุงุช ุดูุฑูุฉ
```
Query Parameters:
  - year: ุงูุณูุฉ
  - month: ุงูุดูุฑ
```

#### GET /api/reports/by-department
ุฅุญุตุงุฆูุงุช ุญุณุจ ุงููุณู

#### GET /api/reports/export/excel
ุชุตุฏูุฑ Excel

#### GET /api/reports/export/pdf
ุชุตุฏูุฑ PDF

#### GET /api/reports/export/csv
ุชุตุฏูุฑ CSV

### Audit Logs Endpoints

#### GET /api/audit-logs
ุงูุญุตูู ุนูู ุณุฌู ุงูุชุนุฏููุงุช
```
Query Parameters:
  - page: ุฑูู ุงูุตูุญุฉ
  - limit: ุนุฏุฏ ุงููุชุงุฆุฌ
```

### Notifications Endpoints

#### GET /api/notifications
ุงูุญุตูู ุนูู ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏู

#### PUT /api/notifications/:id/read
ุชุนููู ุฅุดุนุงุฑ ูููุฑูุก

#### PUT /api/notifications/read-all
ุชุนููู ุฌููุน ุงูุฅุดุนุงุฑุงุช ูููุฑูุกุฉ

## ๐๏ธ ุงูุชูููููุฌูุง ุงููุณุชุฎุฏูุฉ

### Backend
- Node.js & Express.js
- TypeScript
- MySQL (mysql2)
- JWT (jsonwebtoken)
- Bcrypt (bcryptjs)
- NodeMailer
- ExcelJS (ุชุตุฏูุฑ Excel)
- PDFKit (ุชุตุฏูุฑ PDF)

### Frontend
- React 19
- TypeScript
- Wouter (Routing)
- TailwindCSS
- Radix UI Components
- Recharts (ุงูุฑุณูู ุงูุจูุงููุฉ)
- Axios
- Sonner (Toast Notifications)

### DevOps
- Docker & Docker Compose
- Railway (Deployment)
- Vite (Build Tool)

## ๐ ุงูุฃูุงู

### ุงูููุฒุงุช ุงูุฃูููุฉ
- JWT Authentication ูุน Refresh Tokens
- Password Hashing ุจุงุณุชุฎุฏุงู Bcrypt
- SQL Injection Prevention (Prepared Statements)
- CORS Configuration
- Rate Limiting
- Input Validation
- Environment Variables ููุจูุงูุงุช ุงูุญุณุงุณุฉ
- HTTPS ูู Production

### โ๏ธ ุชูุจููุงุช ุฃูููุฉ ูููุฉ

#### 1. ุชุบููุฑ JWT Secret
```bash
# ูู ููู .envุ ูู ุจุฅูุดุงุก ููุชุงุญ ุณุฑู ููู
JWT_SECRET=your_very_strong_random_secret_key_here_min_32_chars

# ููููู ุฅูุดุงุก ููุชุงุญ ุนุดูุงุฆู ุจุงุณุชุฎุฏุงู:
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

#### 2. ุชุบููุฑ ูููุฉ ูุฑูุฑ ุงููุณุคูู ุงูุงูุชุฑุงุถูุฉ
**โ๏ธ ููู ุฌุฏุงู:** ุจุนุฏ ุฅุนุฏุงุฏ ุงููุธุงูุ ูู ุจุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ ููุฑุงู:

1. ุณุฌู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู:
   - Username: `admin`
   - Password: `admin123`

2. ุงูุชูู ุฅูู ุงูููู ุงูุดุฎุตู ููู ุจุชุบููุฑ ูููุฉ ุงููุฑูุฑ ููุฑุงู

3. ุฃู ููููู ุญุฐู ุญุณุงุจ admin ุงูุงูุชุฑุงุถู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ

#### 3. ุฃูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ูููุฉ ูุฑูุฑ ูููุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช
DB_PASSWORD=very_strong_database_password_here

# ูุง ุชุณุชุฎุฏู root ูู Production
DB_USER=mada_user
```

#### 4. ุฃูุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
```bash
# ุงุณุชุฎุฏู App Password ูู Gmailุ ูููุณ ูููุฉ ุงููุฑูุฑ ุงูุนุงุฏูุฉ
# ุฑุงุฌุน: https://support.google.com/accounts/answer/185833
EMAIL_PASSWORD=your_gmail_app_password
```

#### 5. ูู Production
- ุงุณุชุฎุฏู HTTPS ููุท
- ูุนูู Rate Limiting
- ุงุณุชุฎุฏู Environment Variables ุขููุฉ
- ูู ุจุนูู Backup ููุชุธู ููุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฑุงูุจ Audit Logs ุจุงูุชุธุงู
- ูู ุจุชุญุฏูุซ ุงูุญุฒู ุจุดูู ุฏูุฑู

## ๐ ุงูุญุณุงุจ ุงูุงูุชุฑุงุถู

ุจุนุฏ ุชุดุบูู schema.sqlุ ูุชู ุฅูุดุงุก ุญุณุงุจ ูุณุคูู ุงูุชุฑุงุถู:
```
Username: admin
Password: admin123
```

**โ๏ธ ููู ุฌุฏุงู:** ูุฑุฌู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ ููุฑุงู ุจุนุฏ ุฃูู ุชุณุฌูู ุฏุฎูู!

## ๐ค ุงููุณุงููุฉ

ูุฑุญุจ ุจุงููุณุงููุงุช! ูุฑุฌู:
1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก branch ุฌุฏูุฏ (`git checkout -b feature/amazing-feature`)
3. Commit ุงูุชุบููุฑุงุช (`git commit -m 'Add amazing feature'`)
4. Push ุฅูู Branch (`git push origin feature/amazing-feature`)
5. ูุชุญ Pull Request

## ๐ ุงูุชุฑุฎูุต

MIT License - ุฑุงุฌุน ููู LICENSE ููุชูุงุตูู

## ๐ฅ ุงููุฑูู

- ุชุทููุฑ: ูุฑูู ูุฏู ุงูุณูุงุญูุฉ
- ุงูุชุตููู: ูุฑูู ูุฏู ุงูุณูุงุญูุฉ

## ๐ ุงูุฏุนู

ููุญุตูู ุนูู ุงูุฏุนูุ ูุฑุฌู:
- ูุชุญ Issue ุนูู GitHub
- ุงูุชูุงุตู ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: support@mada.sa

## ๐ ุดูุฑ ุฎุงุต

ุดูุฑ ุฎุงุต ูุฌููุน ุงูููุชุจุงุช ูุงูุฃุฏูุงุช ููุชูุญุฉ ุงููุตุฏุฑ ุงููุณุชุฎุฏูุฉ ูู ูุฐุง ุงููุดุฑูุน.

---

Made with โค๏ธ by Mada Tourism Team